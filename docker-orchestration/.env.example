# Docker Orchestration Environment Configuration
# Copy this file to .env and modify the values as needed

# =============================================================================
# Database Configuration
# =============================================================================

# MySQL Database Settings
DB_HOST=mysql
DB_PORT=3306
DB_NAME=appdb
DB_USER=root
DB_PASSWORD=rootpass

# Application Database User (recommended for production)
APP_DB_USER=appuser
APP_DB_PASSWORD=apppass

# MySQL Root Configuration
MYSQL_ROOT_PASSWORD=rootpass
MYSQL_DATABASE=appdb
MYSQL_USER=appuser
MYSQL_PASSWORD=apppass

# =============================================================================
# Application Configuration
# =============================================================================

# Simple CRUD Board Backend
CRUD_BACKEND_PORT=8080
CRUD_FRONTEND_PORT=3000

# User Authentication Backend
AUTH_BACKEND_PORT=8081
AUTH_FRONTEND_PORT=3001

# JWT and Session Configuration
JWT_SECRET=your-jwt-secret-change-in-production-min-32-chars
SESSION_SECRET=your-session-secret-change-in-production-min-32-chars

# =============================================================================
# Infrastructure Configuration
# =============================================================================

# Caddy Proxy
CADDY_HTTP_PORT=80
CADDY_HTTPS_PORT=443
DOMAIN_NAME=app.local

# Docker Network
NETWORK_NAME=docker-orchestration-network
NETWORK_SUBNET=172.20.0.0/16

# =============================================================================
# Development Configuration
# =============================================================================

# Environment Mode
NODE_ENV=development
GIN_MODE=debug

# API URLs (for frontend)
NEXT_PUBLIC_CRUD_API_URL=https://app.local/api/crud
NEXT_PUBLIC_AUTH_API_URL=https://app.local/api/auth

# =============================================================================
# Performance and Monitoring
# =============================================================================

# Database Connection Pool
DB_MAX_OPEN_CONNS=25
DB_MAX_IDLE_CONNS=5
DB_CONN_MAX_LIFETIME=300s

# Logging
LOG_LEVEL=info
DB_LOG_LEVEL=warn
SLOW_QUERY_THRESHOLD=200ms

# Health Check
HEALTH_CHECK_INTERVAL=30s
HEALTH_CHECK_TIMEOUT=10s
HEALTH_CHECK_RETRIES=3

# =============================================================================
# Security Configuration (Production)
# =============================================================================

# CORS Settings
CORS_ALLOWED_ORIGINS=https://app.local,https://localhost:3000,https://localhost:3001
CORS_ALLOWED_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_ALLOWED_HEADERS=Content-Type,Authorization,X-Requested-With

# Cookie Settings
COOKIE_SECURE=true
COOKIE_HTTP_ONLY=true
COOKIE_SAME_SITE=strict
COOKIE_MAX_AGE=86400

# Rate Limiting
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_WINDOW=60s

# =============================================================================
# Docker Configuration
# =============================================================================

# Image Tags
CRUD_FRONTEND_IMAGE=docker-orchestration/crud-frontend:latest
CRUD_BACKEND_IMAGE=docker-orchestration/crud-backend:latest
AUTH_FRONTEND_IMAGE=docker-orchestration/auth-frontend:latest
AUTH_BACKEND_IMAGE=docker-orchestration/auth-backend:latest

# Container Resources
MEMORY_LIMIT_FRONTEND=512m
MEMORY_LIMIT_BACKEND=1g
MEMORY_LIMIT_DATABASE=2g

# Volume Names
MYSQL_VOLUME=docker-orchestration-mysql-data
CADDY_DATA_VOLUME=docker-orchestration-caddy-data
CADDY_CONFIG_VOLUME=docker-orchestration-caddy-config