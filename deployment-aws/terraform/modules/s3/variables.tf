# S3ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®å¤‰æ•°å®šç¾©
#
# ðŸŽ¯ å­¦ç¿’ãƒã‚¤ãƒ³ãƒˆ:
# - ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®å…¥åŠ›ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å®šç¾©
# - åž‹æŒ‡å®šã¨ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã§ã‚¨ãƒ©ãƒ¼ã‚’é˜²ã
# - ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã§ä½¿ã„ã‚„ã™ã•ã‚’å‘ä¸Š

variable "bucket_name" {
  description = "S3ãƒã‚±ãƒƒãƒˆåï¼ˆã‚°ãƒ­ãƒ¼ãƒãƒ«ã§ãƒ¦ãƒ‹ãƒ¼ã‚¯ã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ï¼‰"
  type        = string

  # TODO: ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¿½åŠ 
  # ãƒ’ãƒ³ãƒˆ: S3ãƒã‚±ãƒƒãƒˆåã®å‘½åè¦å‰‡ã«å¾“ã†
  validation {
    condition = can(regex("^[a-z0-9][a-z0-9-]*[a-z0-9]$", var.bucket_name)) && length(var.bucket_name) >= 3 && length(var.bucket_name) <= 63
    error_message = "ãƒã‚±ãƒƒãƒˆåã¯3-63æ–‡å­—ã§ã€å°æ–‡å­—ã€æ•°å­—ã€ãƒã‚¤ãƒ•ãƒ³ã®ã¿ä½¿ç”¨å¯èƒ½ã§ã™ã€‚"
  }
}

variable "index_document" {
  description = "ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ãƒ•ã‚¡ã‚¤ãƒ«å"
  type        = string
  # TODO: ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã‚’è¨­å®š
  default = "TODO: ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«åã‚’è¨­å®š"
}

variable "error_document" {
  description = "ã‚¨ãƒ©ãƒ¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ãƒ•ã‚¡ã‚¤ãƒ«å"
  type        = string
  # TODO: ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã‚’è¨­å®š
  default = "TODO: ã‚¨ãƒ©ãƒ¼ãƒ•ã‚¡ã‚¤ãƒ«åã‚’è¨­å®š"
}

variable "enable_versioning" {
  description = "S3ãƒã‚±ãƒƒãƒˆã®ãƒãƒ¼ã‚¸ãƒ§ãƒ‹ãƒ³ã‚°ã‚’æœ‰åŠ¹ã«ã™ã‚‹ã‹ã©ã†ã‹"
  type        = bool
  # TODO: ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã‚’è¨­å®š
  default = false # é–‹ç™ºç’°å¢ƒã§ã¯ç„¡åŠ¹ã€æœ¬ç•ªç’°å¢ƒã§ã¯æœ‰åŠ¹ã«ã™ã‚‹ã“ã¨ã‚’æ¤œè¨Ž
}

variable "cors_allowed_origins" {
  description = "CORSè¨­å®šã§è¨±å¯ã™ã‚‹ã‚ªãƒªã‚¸ãƒ³ã®ãƒªã‚¹ãƒˆ"
  type        = list(string)
  # TODO: ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã‚’è¨­å®š
  # ãƒ’ãƒ³ãƒˆ: é–‹ç™ºæ™‚ã¯ ["*"]ã€æœ¬ç•ªã§ã¯å…·ä½“çš„ãªãƒ‰ãƒ¡ã‚¤ãƒ³ã‚’æŒ‡å®š
  default = ["TODO: è¨±å¯ã™ã‚‹ã‚ªãƒªã‚¸ãƒ³ã‚’è¨­å®š"]
}

variable "cors_allowed_methods" {
  description = "CORSè¨­å®šã§è¨±å¯ã™ã‚‹HTTPãƒ¡ã‚½ãƒƒãƒ‰ã®ãƒªã‚¹ãƒˆ"
  type        = list(string)
  # TODO: ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã‚’è¨­å®š
  default = ["TODO: è¨±å¯ã™ã‚‹HTTPãƒ¡ã‚½ãƒƒãƒ‰ã‚’è¨­å®š"]
}

variable "common_tags" {
  description = "ãƒªã‚½ãƒ¼ã‚¹ã«é©ç”¨ã™ã‚‹å…±é€šã‚¿ã‚°"
  type        = map(string)
  default     = {}
}