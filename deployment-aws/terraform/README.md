# Terraform Infrastructure

ã“ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã¯ã€AWSã‚¤ãƒ³ãƒ•ãƒ©ã‚¹ãƒˆãƒ©ã‚¯ãƒãƒ£ã‚’å®šç¾©ã™ã‚‹Terraformã‚³ãƒ¼ãƒ‰ãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚

## ğŸ“ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ

```
terraform/
â”œâ”€â”€ modules/                  # å†åˆ©ç”¨å¯èƒ½ãªãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«
â”‚   â”œâ”€â”€ s3/                  # S3ãƒã‚±ãƒƒãƒˆè¨­å®š
â”‚   â”œâ”€â”€ dynamodb/            # DynamoDBè¨­å®š
â”‚   â”œâ”€â”€ lambda/              # Lambdaé–¢æ•°è¨­å®š
â”‚   â”œâ”€â”€ api-gateway/         # API Gatewayè¨­å®š
â”‚   â””â”€â”€ iam/                 # IAMãƒ­ãƒ¼ãƒ«ãƒ»ãƒãƒªã‚·ãƒ¼è¨­å®š
â”œâ”€â”€ environments/            # ç’°å¢ƒåˆ¥è¨­å®š
â”‚   â”œâ”€â”€ dev/                 # é–‹ç™ºç’°å¢ƒ
â”‚   â””â”€â”€ prod/                # æœ¬ç•ªç’°å¢ƒ
â”œâ”€â”€ backend.tf               # Terraformãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰è¨­å®š
â”œâ”€â”€ main.tf                  # ãƒ¡ã‚¤ãƒ³ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«
â”œâ”€â”€ variables.tf             # å¤‰æ•°å®šç¾©
â”œâ”€â”€ outputs.tf               # å‡ºåŠ›å€¤å®šç¾©
â””â”€â”€ versions.tf              # ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ãƒãƒ¼ã‚¸ãƒ§ãƒ³æŒ‡å®š
```

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### 1. åˆæœŸåŒ–

```bash
cd terraform
terraform init
```

### 2. ãƒ—ãƒ©ãƒ³ã®ç¢ºèª

```bash
# é–‹ç™ºç’°å¢ƒ
terraform plan -var-file="environments/dev/terraform.tfvars"

# æœ¬ç•ªç’°å¢ƒ  
terraform plan -var-file="environments/prod/terraform.tfvars"
```

### 3. ã‚¤ãƒ³ãƒ•ãƒ©ã‚¹ãƒˆãƒ©ã‚¯ãƒãƒ£ã®é©ç”¨

```bash
# é–‹ç™ºç’°å¢ƒ
terraform apply -var-file="environments/dev/terraform.tfvars"

# æœ¬ç•ªç’°å¢ƒ
terraform apply -var-file="environments/prod/terraform.tfvars"
```

## ğŸ”§ å®Ÿè£…ã®ãƒ’ãƒ³ãƒˆ

### ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«è¨­è¨ˆã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

1. **å˜ä¸€è²¬ä»»ã®åŸå‰‡**: å„ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯1ã¤ã®AWSã‚µãƒ¼ãƒ“ã‚¹ã«é›†ä¸­
2. **å†åˆ©ç”¨æ€§**: ç’°å¢ƒé–“ã§å…±é€šåˆ©ç”¨ã§ãã‚‹è¨­è¨ˆ
3. **å¤‰æ•°ã®æ´»ç”¨**: ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰ã‚’é¿ã‘ã€å¤‰æ•°ã§è¨­å®šå¯èƒ½ã«

### ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è€ƒæ…®äº‹é …

- IAMãƒ­ãƒ¼ãƒ«ã¯æœ€å°æ¨©é™ã®åŸå‰‡ã«å¾“ã†
- S3ãƒã‚±ãƒƒãƒˆã®ãƒ‘ãƒ–ãƒªãƒƒã‚¯ã‚¢ã‚¯ã‚»ã‚¹ã¯å¿…è¦æœ€å°é™ã«
- DynamoDBã®æš—å·åŒ–ã‚’æœ‰åŠ¹ã«ã™ã‚‹

### ã‚³ã‚¹ãƒˆæœ€é©åŒ–

- DynamoDBã¯ã‚ªãƒ³ãƒ‡ãƒãƒ³ãƒ‰èª²é‡‘ã‚’ä½¿ç”¨
- Lambdaã®ãƒ¡ãƒ¢ãƒªã¯128MBã‹ã‚‰é–‹å§‹
- ä¸è¦ãªãƒªã‚½ãƒ¼ã‚¹ã®ã‚¿ã‚°ä»˜ã‘ã§ç®¡ç†

## ğŸ“ TODO: å®Ÿè£…ãŒå¿…è¦ãªãƒ•ã‚¡ã‚¤ãƒ«

ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å®Ÿè£…ã—ã¦ãã ã•ã„ï¼š

- [ ] `versions.tf` - Terraformã¨ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³æŒ‡å®š
- [ ] `variables.tf` - å…±é€šå¤‰æ•°ã®å®šç¾©
- [ ] `main.tf` - ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®å‘¼ã³å‡ºã—
- [ ] `outputs.tf` - ä»–ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ä½¿ç”¨ã™ã‚‹å€¤ã®å‡ºåŠ›
- [ ] `modules/s3/main.tf` - S3ãƒã‚±ãƒƒãƒˆã®è¨­å®š
- [ ] `modules/dynamodb/main.tf` - DynamoDBãƒ†ãƒ¼ãƒ–ãƒ«ã®è¨­å®š
- [ ] `modules/lambda/main.tf` - Lambdaé–¢æ•°ã®è¨­å®š
- [ ] `modules/api-gateway/main.tf` - API Gatewayã®è¨­å®š
- [ ] `modules/iam/main.tf` - IAMãƒ­ãƒ¼ãƒ«ãƒ»ãƒãƒªã‚·ãƒ¼ã®è¨­å®š
- [ ] `environments/dev/terraform.tfvars` - é–‹ç™ºç’°å¢ƒã®å¤‰æ•°å€¤
- [ ] `environments/prod/terraform.tfvars` - æœ¬ç•ªç’°å¢ƒã®å¤‰æ•°å€¤

## ğŸ¯ å­¦ç¿’ãƒã‚¤ãƒ³ãƒˆ

1. **Infrastructure as Code**: ã‚³ãƒ¼ãƒ‰ã§ã‚¤ãƒ³ãƒ•ãƒ©ã‚’ç®¡ç†ã™ã‚‹åˆ©ç‚¹
2. **ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åŒ–**: å†åˆ©ç”¨å¯èƒ½ãªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ä½œæˆ
3. **ç’°å¢ƒåˆ†é›¢**: dev/prodã®é©åˆ‡ãªåˆ†é›¢æ–¹æ³•
4. **çŠ¶æ…‹ç®¡ç†**: Terraformã‚¹ãƒ†ãƒ¼ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã®ç®¡ç†